create table transactions(
  trIdentifier number primary key,
  trUser number,
  trAccount number,
  trDate date,
  trType varchar2(1),
  amount number,
  CONSTRAINT fk_user
  FOREIGN KEY (trUser) REFERENCES CUSM(custid)
  CONSTRAINT fk_account
  FOREIGN KEY (trAccount) REFERENCES accounts(accountNumber)
);
/
create sequence transactions_identifier start with 1;

create or replace trigger transactions_identifier_trigger
  before insert or update on transactions
  for each row
begin
  if inserting and :new.trIdentifier is null then
    :new.trldentifier := transactions_identifier.nextval;
  end if;
end;
/
